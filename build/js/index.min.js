var gameController={_animation:null,_canvasWidth:0,_canvasHeight:0,_currentFloor:0,_floorWidth:90,_floorDeltaY:50,_speed:50,_$canvas:$(".canvas"),_$scroller:$(".scroller"),_$people:$(".people"),_peopleSpeed:50,_peopleVerticalSpeed:100,_scrollerHeight:$(".scroller").height(),__currentScrollerY:0,__currentPeopleY:0,__currentPeopleVertical:0,__frameIndex:0,createFloorSpan:function(){this._currentFloor++;var e=this._currentFloor*this._floorDeltaY+200,t=Math.random()*(this._canvasWidth-this._floorWidth);$('<i class="floor"></i>').css({top:e,left:t}).appendTo(this._$scroller)},removeFloorSpan:function(){$(".floor").eq(0).remove()},people:function(e){var t=this._peopleSpeed/e,o=this._peopleVerticalSpeed/e;if(this.__currentPeopleY+=t,this._$people.css({top:this.__currentPeopleY}),this._peopleGoLeft){if(this.__currentPeopleVertical<=0)return;this.__currentPeopleVertical-=o,this._$people.css({left:this.__currentPeopleVertical})}if(this._peopleGoRight){if(this.__currentPeopleVertical>=this._canvasWidth-15)return;this.__currentPeopleVertical+=o,this._$people.css({left:this.__currentPeopleVertical})}},peopleUserController:function(){var e=this;$(window).keydown(function(t){return console.log(t.key),"ArrowRight"==t.key?(e._peopleGoRight=!0,void(e._peopleGoLeft=!1)):"ArrowLeft"==t.key?(e._peopleGoRight=!1,void(e._peopleGoLeft=!0)):void 0}),$(window).keyup(function(t){return"ArrowRight"==t.key?void(e._peopleGoRight=!1):"ArrowLeft"==t.key?void(e._peopleGoLeft=!1):void 0})},core:function(e){var t=this,o=this._speed/e,r=this._floorDeltaY/o;this.__frameIndex++,this.__currentScrollerY-=o,this._$scroller.css({transform:"translate3d(0, "+t.__currentScrollerY+"px, 0)"}),this.__frameIndex>6*r&&this.__frameIndex%r==0&&(this.createFloorSpan(),this.removeFloorSpan()),this.people(e)},run:function(e){if(this._animation)return void console.error("Animation is aready in process please do not run again!");e=e||60;var t=1e3/e,o=this;return this._animation=setInterval(function(){o.core(e)},t)},stop:function(){clearInterval(this._animation)},init:function(){var e=this,t=0;for($(window).resize(function(){e._canvasWidth=e._$canvas.width(),e._canvasHeight=e._$canvas.height()}),e._canvasWidth=$(".canvas").width(),e._canvasHeight=e._$canvas.height();t++<13;)this.createFloorSpan();this.peopleUserController(),this.run(60)}};$(function(){gameController.init()});